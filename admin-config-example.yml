# ============================================================
# EZ Backend Turbo â€” Admin Configuration
# ============================================================
# Copy this file, fill in your values, and pass it when
# starting the server:
#
#   java -jar ez-backend-turbo.jar my-config.yml
#   java -jar ez-backend-turbo.jar --dev    (uses defaults, no config needed)
#
# Values here override the internal defaults baked into the JAR.
# Only include the properties you need to change.
# ============================================================

spring:
  datasource:
    # PostgreSQL connection URL
    # Format: jdbc:postgresql://<host>:<port>/<database>
    url: jdbc:postgresql://localhost:5432/ezdb

    # Database credentials
    username: postgres
    password: postgres

# ============================================================
# EZ Application Settings
# ============================================================
ez:
  cors:
    # Allowed origin for CORS requests (must include port)
    # Example: http://localhost:3000, https://myapp.example.com:443
    allowed-origin: http://localhost:3000

  startup:
    # If true, missing database tables are created automatically
    # on startup. If false, the server refuses to start and logs
    # which tables are missing.
    auto-create-tables: true

  log:
    # Log message language. Reads from locale/{value}/*.json
    # Supported: en, fr
    locale: en

    # Enable or disable console log output.
    console: true

    # Enable or disable file log output.
    # Log files: logs/ez-backend.log (10 MB rotation, 5 archives).
    file: true

  source:
    crs: EPSG:4326

  target:
    crs: EPSG:32188

  zone:
    # When two zones claim the same network link:
    # true = first zone in the payload array wins
    # false = last zone wins
    overlap-first-wins: true

  hbefa:
    warm-file: average_warm.csv
    cold-file: average_cold.csv
    vehicle-types-file: vehicle-types.yml

  ratelimit:
    # Maximum requests per second from a single IP before ban
    max-requests-per-second: 20

    # How long (seconds) a banned IP stays blocked
    ban-duration-seconds: 30

  processes:
    # Administrative operations (cancel, delete)
    admin:
      max: 50
      timeout: 30000

    # Read operations (data retrieval, metadata)
    read:
      max: 20
      timeout: 60000

    # Compute operations (simulation, retry)
    compute:
      max: 2
      timeout: 300000

  scoring:
    scale-factor:
      walk: 0.5
      bike: 0.5
      car: 0.5
      ev: 0.5
      subway: 0.5
      bus: 0.5
    performing-utils-per-hr: 6.0
    marginal-utility-of-money: 1.0
    brain-exp-beta: 2.0
    learning-rate: 1.0
    car:
      marginal-utility-of-traveling: -6.0
      monetary-distance-rate: -0.0002
    pt:
      marginal-utility-of-traveling: -3.0
    walk:
      marginal-utility-of-traveling: -12.0
    bike:
      marginal-utility-of-traveling: -6.0

  strategy:
    change-exp-beta-weight: 0.7
    reroute-weight: 0.1
    subtour-mode-choice-weight: 0.1
    time-allocation-mutator-weight: 0.1
    subtour-modes: car,pt,walk,bike
    chain-based-modes: car,bike
    mutation-range: 7200.0
    max-agent-plan-memory-size: 5
    global-threads: 4
    qsim-threads: 4
